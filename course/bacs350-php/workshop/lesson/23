BACS 350 - Lesson23

* Templates Design
* Monday, Oct 15, 2018
* by Mark Seaman

![](img/Bear_Logo.png)



### Review
* Object Oriented Data Types
* Building Apps
* Controller Design Pattern


### Next Steps
* Template Design


## Templates

### Limitation of current solution
* Create page structure independent of content being displayed
* Make reusable functions to create pages
* Manage HTML and Content spaces


### 1 - Simple Text Replacement
Inject replacement strings into HTML code

```
 $text = 'str_replace("title", "Gettysburg Address", "<h3>title</h3>");';

 <h3>Gettysburg Address</h3>

```


### 2 - Read Template File
Read a file in PHP in the same directory

```
file_get_contents("article.html");

<h3>title</h3>
<p>body</p>
```


### 3 - Replace Text
Replace title and body in HTML template

```
    function transform_gettysburg($text) {
        $text = str_replace("title", "Gettysburg Address", $text);
        $text = str_replace("body", "Four score and seven years ago ...", $text);
        $text = str_replace("author", "Abe Lincoln", $text);
        return $text;
    }

    $text = file_get_contents("article.html");
    $text = transform_gettysburg($text);

<h3>Gettysburg Address</h3>
<p>Four score and seven years ago ...</p>

```

### 4 - Transform Article
Function to convert text in template

```
    function transform_article($text, $title, $body, $author) {
        $text = str_replace("title",  $title, $text);
        $text = str_replace("body",   $body,  $text);
        $text = str_replace("author", $author. $text);
        return $text;
    }

    $text = file_get_contents("article.html");

    transform_article($text, "Gettysburg Address", "Four score and seven years ago ...", "Abe Lincoln");

<h3>Gettysburg Address</h3>
<p>Four score and seven years ago ...</p>

```

### 5 - Render Article
Replace specific settings for articles

```
    function render_article($template, $title, $body, $author) {
        $text = file_get_contents("article.html");
        $text = transform_article($text,, $title, $body, $author);
        return $text;
    }

    // Set up options
    $template = "article.html";
    $title = "Gettysburg Address";
    $body = "Four score and seven years ago ...";
    $author = "Abe Lincoln";

    // Read and transform template
    render_article($template, $title, $body, $author);

 <h3>Gettysburg Address</h3>
 <p>Four score and seven years ago ...</p>


```


### 6 - Article Settings
Pack all settings into an array

```
    array(
        "title" => "Gettysburg Address",
        "body" => "Four score and seven years ago ...",
        "author" => "Abe Lincoln");

```


### 7 - Transform Text
Define function that replaces all settings

```
    function transform_text ($text, $settings) {
        foreach ($settings as $key => $value) {
            $text = str_replace($key,  $value,  $text);
        }
        return $text;
    }

    $settings = article_settings("Gettysburg Address",
            "Four score and seven years ago ...",
            "Abe Lincoln");

    $text = transform_text($text, $settings);

 <h3>Gettysburg Address</h3>
 <p>Four score and seven years ago ...</p>
```


### 8 - Render Template
Define function that converts a template using settings

```
    function render_template($template, $settings) {
        $text = file_get_contents($template);
        $text = transform_text($text, $settings);
        return $text;
    }

    $settings = article_settings("Gettysburg Address",
        "Four score and seven years ago ...",  "Abe Lincoln");

    render_template("article.html", $settings)

 <h3>Gettysburg Address</h3>
 <p>Four score and seven years ago ...</p>
```


### solution/23/views.php
* Annotated Code Examples


### templates/views.php
* Code to use in your future app development


## Build

### Create project/23
* Create index.php
* Update code to include changes from "Mark-Seaman"
* Copy templates/views.php
* Debug simple page

### Create HTML template file
* Use text from solution/23/article.html
* Use design pattern for solution 23 to create a view

```
$title = "Declaration of Independence";
$body = "We hold these truths to be self-evident";
$author = "Tom Jefferson";
```

